<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>NEXUS Web Console - ë©”ì¼ ê´€ë¦¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap & jQuery -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body { background:#f8f9fa; font-size:14px; }
    .topbar{height:60px;background:#1e293b;color:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 20px;position:fixed;top:0;left:0;right:0;z-index:100}
    .topbar .brand{font-weight:700;font-size:1.2rem}
    .sidebar{width:240px;background:#fff;border-right:1px solid #dee2e6;height:calc(100vh - 60px);position:fixed;top:60px;left:0;overflow-y:auto}
    .menu-item{padding:12px 20px;cursor:pointer}
    .menu-item:hover{background:#f1f5f9}
    .menu-item.active{background:#e2e8f0;font-weight:600}
    .main-content{margin-left:240px;padding:24px;margin-top:60px}
    .table thead{background:#f1f5f9}
    .pagination{justify-content:center}
    .small-muted{font-size:12px;color:#6c757d}
  </style>
</head>
<body>
  <!-- ìƒë‹¨ ë°” -->
  <div class="topbar">
    <div class="brand">NEXUS Console</div>
    <div>
      <span id="adminName" class="me-3"></span>
      <button id="btnLogout" class="btn btn-sm btn-outline-light">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>

  <!-- ì‚¬ì´ë“œë°” -->
  <div class="sidebar">
    <div class="menu-item" onclick="location.href='dashboard.html'">ğŸ  í™ˆ</div>
    <div class="menu-item" onclick="location.href='game-list.html'">ğŸ® ê²Œì„ ëª©ë¡</div>
    <hr>
    <div class="px-3"><h6 class="text-muted">ê²Œì„ ê´€ë¦¬ ë©”ë‰´</h6></div>
    <div class="menu-item" onclick="location.href='game-manage.html'">âš™ï¸ ê²Œì„ ê°œìš”</div>
    <div class="menu-item" onclick="location.href='game-users.html'">ğŸ‘¥ ìœ ì € ê´€ë¦¬</div>
    <div class="menu-item" onclick="location.href='game-currency.html'">ğŸ’° ì¬í™” ê´€ë¦¬</div>
    <div class="menu-item" onclick="location.href='game-products.html'">ğŸ›’ ìƒí’ˆ ê´€ë¦¬</div>
    <div class="menu-item" onclick="location.href='game-coupons.html'">ğŸŸ ì¿ í° ê´€ë¦¬</div>
    <div class="menu-item active" onclick="location.href='game-mails.html'">ğŸ“¨ ë©”ì¼ ê´€ë¦¬</div>
  </div>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <div class="main-content container">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4>ğŸ“¨ ë©”ì¼ ê´€ë¦¬</h4>
      <div class="d-flex gap-2">
        <button id="btnOpenCompose" class="btn btn-sm btn-primary">+ ìƒˆ ë©”ì¼ ì‘ì„±</button>
        <button id="btnOpenTemplateCreate" class="btn btn-sm btn-outline-primary">+ í…œí”Œë¦¿ ë“±ë¡</button>
      </div>
    </div>

    <!-- íƒ­: ë°œì†¡ ì´ë ¥ / í…œí”Œë¦¿ -->
    <ul class="nav nav-tabs mb-3" role="tablist">
      <li class="nav-item">
        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabOutbox" type="button">ë°œì†¡ ì´ë ¥</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabTemplates" type="button">í…œí”Œë¦¿</button>
      </li>
    </ul>

    <div class="tab-content">
      <!-- ë°œì†¡ ì´ë ¥ -->
      <div class="tab-pane fade show active" id="tabOutbox">
        <div class="d-flex gap-2 mb-3">
          <input type="text" id="searchKeyword" class="form-control" placeholder="ì œëª© ê²€ìƒ‰">
          <button id="btnSearch" class="btn btn-primary">ê²€ìƒ‰</button>
        </div>
        <table class="table table-hover align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>ì œëª©</th>
              <th>ëŒ€ìƒ</th>
              <th>ìƒíƒœ</th>
              <th>ë°œì†¡ì¼</th>
              <th>ì—ëŸ¬</th>
            </tr>
          </thead>
          <tbody id="outboxBody">
            <tr><td colspan="6" class="text-center text-muted">ë¡œë”© ì¤‘...</td></tr>
          </tbody>
        </table>
        <nav><ul id="paginationOutbox" class="pagination"></ul></nav>
      </div>

      <!-- í…œí”Œë¦¿ -->
      <div class="tab-pane fade" id="tabTemplates">
        <div class="small-muted mb-2">ìì£¼ ì“°ëŠ” ë©”ì¼ì€ í…œí”Œë¦¿ìœ¼ë¡œ ë“±ë¡í•´ë‘ê³  ìƒˆ ë©”ì¼ ì‘ì„± ì‹œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì–´ìš”.</div>
        <table class="table table-hover align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>ì´ë¦„</th>
              <th>ì œëª©</th>
              <th>ê´€ë¦¬</th>
            </tr>
          </thead>
          <tbody id="templateBody">
            <tr><td colspan="4" class="text-center text-muted">ë¡œë”© ì¤‘...</td></tr>
          </tbody>
        </table>
        <nav><ul id="paginationTpl" class="pagination"></ul></nav>
      </div>
    </div>
  </div>

  <!-- ìƒˆ ë©”ì¼ ì‘ì„± ëª¨ë‹¬ -->
  <div class="modal fade" id="composeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg"><div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">ìƒˆ ë©”ì¼ ì‘ì„±</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸°</label>
            <select id="composeTemplate" class="form-select">
              <option value="">(ì„ íƒ ì•ˆ í•¨)</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">ëŒ€ìƒ íƒ€ì…</label>
            <select id="composeTargetType" class="form-select">
              <option value="ALL">ALL (ì „ì²´)</option>
              <option value="USER_ID">USER_ID (íŠ¹ì • ìœ ì €)</option>
            </select>
          </div>
          <div class="col-12" id="composeUserIdsWrap" style="display:none;">
            <label class="form-label">ìœ ì € ID ëª©ë¡ (ì½¤ë§ˆ/ì¤„ë°”ê¿ˆ êµ¬ë¶„)</label>
            <textarea id="composeUserIds" class="form-control" rows="2" placeholder="123, 456, 789"></textarea>
          </div>
          <div class="col-12">
            <label class="form-label">ì œëª©</label>
            <input id="composeTitle" class="form-control" placeholder="ë©”ì¼ ì œëª©" />
          </div>
          <div class="col-12">
            <label class="form-label">ë‚´ìš©</label>
            <textarea id="composeContent" class="form-control" rows="6" placeholder="ë©”ì¼ ë³¸ë¬¸"></textarea>
          </div>
          <div class="col-12 small-muted">
            * í•„ìš”ì‹œ ë³´ìƒì€ ìœ ì € ìƒì„¸ì˜ â€˜ìš´ì˜ ì•¡ì…˜â€™ íƒ­ì—ì„œ ì§€ê¸‰í•˜ì„¸ìš”. (ë˜ëŠ” í…œí”Œë¦¿ í™•ì¥ìœ¼ë¡œ ì—°ë™ ê°€ëŠ¥)
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
        <button id="btnSendMail" class="btn btn-primary">ë°œì†¡</button>
      </div>
    </div></div>
  </div>

  <!-- í…œí”Œë¦¿ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ -->
  <div class="modal fade" id="templateModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg"><div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="templateModalTitle">í…œí”Œë¦¿ ë“±ë¡</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="tplId" />
        <div class="mb-2">
          <label class="form-label">í…œí”Œë¦¿ ì´ë¦„</label>
          <input id="tplName" class="form-control" placeholder="ì˜ˆ: ì ê²€ ì•ˆë‚´" />
        </div>
        <div class="mb-2">
          <label class="form-label">ì œëª©</label>
          <input id="tplTitle" class="form-control" placeholder="ì œëª©" />
        </div>
        <div class="mb-2">
          <label class="form-label">ë‚´ìš©</label>
          <textarea id="tplContent" class="form-control" rows="6" placeholder="ë³¸ë¬¸"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline-danger me-auto" id="btnTplDelete" style="display:none;">ì‚­ì œ</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">ë‹«ê¸°</button>
        <button class="btn btn-primary" id="btnTplSave">ì €ì¥</button>
      </div>
    </div></div>
  </div>

  <script src="./js/api.js"></script>
  <script src="./js/game-mails.js"></script>
</body>
</html>
